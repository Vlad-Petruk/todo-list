(()=>{"use strict";const t=(t,e,n,o,d)=>({title:t,description:e,dueDate:n,priority:o,complite:d});let e=[{id:"all",title:"All Todos",todos:[t("Open me...","i know how you feel... but keep going, just one step at a time","11/12/12","top")]}];document.addEventListener("DOMContentLoaded",(function(){(()=>{const n=document.getElementById("navigation"),o=document.getElementById("content"),d=document.getElementById("modal"),i=document.getElementById("modal-content");function l(){n.innerHTML="",a("button","create-project-btn",null,"Create project",n).addEventListener("click",(()=>{!function(){d.style.display="block",a("h2","modal-title",null,"Section form",i);const t=a("form","todo-form",null,null,i),n=a("input","title","title",null,t,"Title");a("button","section-submit",null,"Submit",t,"Submit").addEventListener("click",(()=>{let t=((t,e)=>{const n=[];return{id:t,title:e,todos:n,addTodo:t=>{n.push(t)},deleteTodo:t=>{let e=n.indexOf(t);n.splice(e,1)}}})(n.value,n.value);console.log(t),e.push(t),r(),l(),c(e.find((t=>t.id===n.value)))})),u()}()})),e.forEach((t=>{const e=document.createElement("div");e.classList.add("nav-element"),"completed"===t.id&&e.classList.add("project-separator"),e.textContent=t.title,e.addEventListener("click",(()=>c(t))),n.appendChild(e)}))}function c(n){o.innerHTML="";const l=document.createElement("div"),v=document.createElement("div");v.classList.add("section-title"),v.textContent=n.title,l.appendChild(v);const f=document.createElement("button");if(f.type="button",f.innerHTML="Add Todo",f.classList.add("add-todo-button"),l.appendChild(f),f.addEventListener("click",(()=>{!function(){const n=document.createElement("h2");n.innerHTML="Create Todo",i.appendChild(n),d.style.display="block";const o=document.createElement("form");o.id="todo-form";const l=a("input","title","title",null,o,"Title"),s=a("textarea","description","description",null,o,"Description"),v=a("input","dueDate","dueDate",null,o,"Due Date"),f=a("select","priority","priority",null,o,"Priority",[{value:"low",text:"Low"},{value:"medium",text:"Medium"},{value:"top",text:"Top"}]);a("button","todo-submit",null,"Submit",o,"Submit").addEventListener("click",(()=>{let n=t(l.value,s.value,v.value,f.value);console.log(n),m("all",n),r(),c(e.find((t=>"all"===t.id)))})),i.appendChild(o),u(),p()}()})),0===n.todos.length){const t=document.createElement("p");t.textContent="No todos for this section.",l.appendChild(t)}else n.todos.forEach(((t,e)=>{const n=document.createElement("div");n.classList.add("todo");const o=document.createElement("input");o.type="checkbox",o.checked=t.complete,o.addEventListener("change",(()=>{t.complete=o.checked,o.checked?d.classList.add("crossed-out"):d.classList.remove("crossed-out")}));const d=document.createElement("div");d.textContent=t.title,d.addEventListener("click",(()=>s(t))),n.appendChild(o),n.appendChild(d),l.appendChild(n)}));o.appendChild(l)}function a(t,e,n,o,d,i,l){const c=document.createElement(t);if(c.setAttribute("name",n),c.setAttribute("id",e),"button"!==t){const t=document.createElement("label");t.setAttribute("for",e),t.textContent=i,d.appendChild(t)}if(c.innerHTML=o,l)for(const t of l){const e=document.createElement("option");e.value=t.value,e.textContent=t.text,c.appendChild(e)}return d.appendChild(c),c}function s(t,e){i.innerHTML=`\n      <p>Todo Details:</p>\n      <p>Title: ${t.title}</p>\n      <p>Descrption: ${t.description||"No details available"}</p>\n      <p>Due date: ${t.dueDate}<p>\n      <p>Priorty: ${t.priority}\n      `,d.style.display="block",u(),p()}function u(){const t=document.createElement("div");t.className="close",t.innerHTML="&times;",t.addEventListener("click",(()=>r())),i.appendChild(t)}function r(){d.style.display="none",i.innerHTML=""}function p(){const t=document.createElement("button");t.textContent="Update",t.addEventListener("click",(()=>(index,void r()))),i.appendChild(t)}function m(t,n){e.find((e=>e.id===t)).todos.push(n),l(),c(e.find((e=>e.id===t)))}l(),c(e.find((t=>"all"===t.id)))})()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFzQk1BLEVBQWMsQ0FBQ0MsRUFBT0MsRUFBYUMsRUFBU0MsRUFBU0MsS0FHaEQsQ0FDSEosUUFDQUMsY0FDQUMsVUFDQUMsV0FDQUMsYUN6QlIsSUFHSUMsRUFBVyxDQUNiLENBQUVDLEdBQUksTUFBT04sTUFBTyxZQUFhTyxNQUFPLENBSnhCUixFQUFZLGFBQWEsaUVBQWlFLFdBQVcsVUNNdkhTLFNBQVNDLGlCQUFpQixvQkFBb0IsV0RDNUIsTUFDZCxNQUFNQyxFQUFhRixTQUFTRyxlQUFlLGNBQ3JDQyxFQUFVSixTQUFTRyxlQUFlLFdBQ2xDRSxFQUFRTCxTQUFTRyxlQUFlLFNBQ2hDRyxFQUFlTixTQUFTRyxlQUFlLGlCQUc3QyxTQUFTSSxJQUNQTCxFQUFXTSxVQUFZLEdBQ0VDLEVBQXVCLFNBQVUscUJBQXNCLEtBQU0saUJBQWtCUCxHQUN2RkQsaUJBQWlCLFNBQVMsTUFzRzdDLFdBQ0VJLEVBQU1LLE1BQU1DLFFBQVUsUUFDSEYsRUFBdUIsS0FBTSxjQUFlLEtBQU0sZUFBZ0JILEdBQXJGLE1BQ01NLEVBQWNILEVBQXVCLE9BQVEsWUFBYSxLQUFNLEtBQU1ILEdBQ3RFTyxFQUFlSixFQUF1QixRQUFTLFFBQVMsUUFBUyxLQUFNRyxFQUFhLFNBRXBFSCxFQUF1QixTQUFVLGlCQUFrQixLQUFNLFNBQVVHLEVBQWEsVUFFeEZYLGlCQUFpQixTQUFTLEtBQ3RDLElBQUlhLEVEcklXLEVBQUNoQixFQUFJTixLQUN4QixNQUFNTyxFQUFRLEdBWWQsTUFBTyxDQUNMRCxLQUNBTixRQUNBTyxRQUNBZ0IsUUFkZUMsSUFDZmpCLEVBQU1rQixLQUFLRCxFQUFLLEVBY2hCRSxXQVZrQkYsSUFDbEIsSUFBSUcsRUFBWXBCLEVBQU1xQixRQUFRSixHQUM5QmpCLEVBQU1zQixPQUFPRixFQUFVLEVBQUUsRUFTMUIsRUNrSG9CRyxDQUFlVCxFQUFhVSxNQUFPVixFQUFhVSxPQUNqRUMsUUFBUUMsSUFBSVgsR0FDWmpCLEVBQVNvQixLQUFLSCxHQUNkWSxJQUNBbkIsSUFDQW9CLEVBQVk5QixFQUFTK0IsTUFBS0MsR0FBV0EsRUFBUS9CLEtBQU9lLEVBQWFVLFFBQU0sSUFHekVPLEdBQ0YsQ0F2SElDLEVBQXdCLElBRTFCbEMsRUFBU21DLFNBQVFILElBQ2YsTUFBTUksRUFBT2pDLFNBQVNrQyxjQUFjLE9BQ3BDRCxFQUFLRSxVQUFVQyxJQUFJLGVBQ0EsY0FBZlAsRUFBUS9CLElBQ1ZtQyxFQUFLRSxVQUFVQyxJQUFJLHFCQUVyQkgsRUFBS0ksWUFBY1IsRUFBUXJDLE1BQzNCeUMsRUFBS2hDLGlCQUFpQixTQUFTLElBQU0wQixFQUFZRSxLQUNqRDNCLEVBQVdvQyxZQUFZTCxFQUFLLEdBRWhDLENBR0EsU0FBU04sRUFBWUUsR0FFbkJ6QixFQUFRSSxVQUFZLEdBQ3BCLE1BQU0rQixFQUFpQnZDLFNBQVNrQyxjQUFjLE9BRXhDckIsRUFBZWIsU0FBU2tDLGNBQWMsT0FDNUNyQixFQUFhc0IsVUFBVUMsSUFBSSxpQkFDM0J2QixFQUFhd0IsWUFBY1IsRUFBUXJDLE1BQ25DK0MsRUFBZUQsWUFBWXpCLEdBRTNCLE1BQU0yQixFQUFnQnhDLFNBQVNrQyxjQUFjLFVBVTdDLEdBVEFNLEVBQWNDLEtBQU0sU0FDcEJELEVBQWNoQyxVQUFZLFdBQzFCZ0MsRUFBY0wsVUFBVUMsSUFBSSxtQkFDNUJHLEVBQWVELFlBQVlFLEdBQzNCQSxFQUFjdkMsaUJBQWlCLFNBQVEsTUEyRnpDLFdBQ0UsTUFBTXlDLEVBQWExQyxTQUFTa0MsY0FBYyxNQUMxQ1EsRUFBV2xDLFVBQVksY0FDdkJGLEVBQWFnQyxZQUFZSSxHQUV6QnJDLEVBQU1LLE1BQU1DLFFBQVUsUUFFdEIsTUFBTWdDLEVBQVczQyxTQUFTa0MsY0FBYyxRQUN4Q1MsRUFBUzdDLEdBQUssWUFHZCxNQUFNOEMsRUFBWW5DLEVBQXVCLFFBQVMsUUFBUyxRQUFTLEtBQU1rQyxFQUFVLFNBQzlFRSxFQUFrQnBDLEVBQXVCLFdBQVksY0FBZSxjQUFlLEtBQU1rQyxFQUFVLGVBQ25HRyxFQUFjckMsRUFBdUIsUUFBUyxVQUFXLFVBQVcsS0FBTWtDLEVBQVUsWUFDcEZJLEVBQWV0QyxFQUF1QixTQUFVLFdBQVksV0FBWSxLQUFNa0MsRUFBVSxXQUFZLENBQ3RHLENBQUVwQixNQUFPLE1BQU95QixLQUFNLE9BQ3RCLENBQUV6QixNQUFPLFNBQVV5QixLQUFNLFVBQ3pCLENBQUV6QixNQUFPLE1BQU95QixLQUFNLFNBRUp2QyxFQUF1QixTQUFVLGNBQWUsS0FBTSxTQUFVa0MsRUFBVSxVQUNsRjFDLGlCQUFpQixTQUFTLEtBQ3RDLElBQUlnRCxFQUFVMUQsRUFBWXFELEVBQVVyQixNQUFPc0IsRUFBZ0J0QixNQUFPdUIsRUFBWXZCLE1BQU13QixFQUFheEIsT0FDakdDLFFBQVFDLElBQUl3QixHQUVaQyxFQUFnQixNQUFNRCxHQUN0QnZCLElBQ0FDLEVBQVk5QixFQUFTK0IsTUFBS0MsR0FBMEIsUUFBZkEsRUFBUS9CLEtBQWMsSUFFN0RRLEVBQWFnQyxZQUFZSyxHQUV6QmIsSUFDQXFCLEdBQ0YsQ0ExSElDLEVBQXFCLElBSU0sSUFBekJ2QixFQUFROUIsTUFBTXNELE9BQWMsQ0FDOUIsTUFBTUMsRUFBaUJ0RCxTQUFTa0MsY0FBYyxLQUM5Q29CLEVBQWVqQixZQUFjLDZCQUM3QkUsRUFBZUQsWUFBWWdCLEVBQzdCLE1BRUV6QixFQUFROUIsTUFBTWlDLFNBQVEsQ0FBQ2hCLEVBQU11QyxLQUMzQixNQUFNQyxFQUFnQnhELFNBQVNrQyxjQUFjLE9BQzdDc0IsRUFBY3JCLFVBQVVDLElBQUksUUFDNUIsTUFBTXFCLEVBQVd6RCxTQUFTa0MsY0FBYyxTQUN4Q3VCLEVBQVNoQixLQUFPLFdBQ2hCZ0IsRUFBU0MsUUFBVTFDLEVBQUsyQyxTQUV4QkYsRUFBU3hELGlCQUFpQixVQUFVLEtBQ2xDZSxFQUFLMkMsU0FBV0YsRUFBU0MsUUFFckJELEVBQVNDLFFBQ2JFLEVBQVl6QixVQUFVQyxJQUFJLGVBRXhCd0IsRUFBWXpCLFVBQVUwQixPQUFPLGNBQy9CLElBR0YsTUFBTUQsRUFBYzVELFNBQVNrQyxjQUFjLE9BRTNDMEIsRUFBWXZCLFlBQWNyQixFQUFLeEIsTUFDL0JvRSxFQUFZM0QsaUJBQWlCLFNBQVMsSUFBTTZELEVBQXFCOUMsS0FFakV3QyxFQUFjbEIsWUFBWW1CLEdBQzFCRCxFQUFjbEIsWUFBWXNCLEdBQzFCckIsRUFBZUQsWUFBWWtCLEVBQWEsSUFLNUNwRCxFQUFRa0MsWUFBWUMsRUFDdEIsQ0FHQSxTQUFTOUIsRUFBdUJnQyxFQUFNM0MsRUFBSWlFLEVBQU12RCxFQUFXd0QsRUFBVUMsRUFBV0MsR0FDOUUsTUFBTUMsRUFBVW5FLFNBQVNrQyxjQUFjTyxHQUl2QyxHQUhBMEIsRUFBUUMsYUFBYSxPQUFRTCxHQUM3QkksRUFBUUMsYUFBYSxLQUFNdEUsR0FFZCxXQUFUMkMsRUFBbUIsQ0FDbkIsTUFBTTRCLEVBQVFyRSxTQUFTa0MsY0FBYyxTQUNyQ21DLEVBQU1ELGFBQWEsTUFBT3RFLEdBQzFCdUUsRUFBTWhDLFlBQWM0QixFQUNwQkQsRUFBUzFCLFlBQVkrQixFQUN6QixDQUlFLEdBRkZGLEVBQVEzRCxVQUFZQSxFQUVkMEQsRUFDQSxJQUFLLE1BQU1JLEtBQVVKLEVBQVMsQ0FDMUIsTUFBTUssRUFBZ0J2RSxTQUFTa0MsY0FBYyxVQUM3Q3FDLEVBQWNoRCxNQUFRK0MsRUFBTy9DLE1BQzdCZ0QsRUFBY2xDLFlBQWNpQyxFQUFPdEIsS0FDbkNtQixFQUFRN0IsWUFBWWlDLEVBQ3hCLENBSUosT0FEQVAsRUFBUzFCLFlBQVk2QixHQUNkQSxDQUNYLENBd0RBLFNBQVNMLEVBQXFCOUMsRUFBTXVDLEdBQ2xDakQsRUFBYUUsVUFBWSxpREFFYlEsRUFBS3hCLG1DQUNBd0IsRUFBS3ZCLGFBQWUsa0RBQ3RCdUIsRUFBS3RCLGlDQUNOc0IsRUFBS3JCLG1CQUVuQlUsRUFBTUssTUFBTUMsUUFBVSxRQUV0Qm1CLElBQ0FxQixHQUNGLENBRUEsU0FBU3JCLElBRVAsTUFBTTBDLEVBQWN4RSxTQUFTa0MsY0FBYyxPQUMzQ3NDLEVBQVlDLFVBQVksUUFDeEJELEVBQVloRSxVQUFZLFVBR3hCZ0UsRUFBWXZFLGlCQUFpQixTQUFTLElBQU15QixNQUc1Q3BCLEVBQWFnQyxZQUFZa0MsRUFDM0IsQ0FJQSxTQUFTOUMsSUFDUHJCLEVBQU1LLE1BQU1DLFFBQVUsT0FFdEJMLEVBQWFFLFVBQVksRUFFM0IsQ0FFQSxTQUFTMkMsSUFFUCxNQUFNdUIsRUFBWTFFLFNBQVNrQyxjQUFjLFVBQ3pDd0MsRUFBVXJDLFlBQWMsU0FDeEJxQyxFQUFVekUsaUJBQWlCLFNBQVMsS0FBd0JzRCxXQVM1RDdCLE9BUkFwQixFQUFhZ0MsWUFBWW9DLEVBQzNCLENBWUEsU0FBU3hCLEVBQWdCeUIsRUFBVzNELEdBQ2xDbkIsRUFBUytCLE1BQUtDLEdBQVdBLEVBQVEvQixLQUFPNkUsSUFBVzVFLE1BQU1rQixLQUFLRCxHQUc5RFQsSUFDQW9CLEVBQVk5QixFQUFTK0IsTUFBS0MsR0FBV0EsRUFBUS9CLEtBQU82RSxJQUN0RCxDQUdGcEUsSUFDQW9CLEVBQVk5QixFQUFTK0IsTUFBS0MsR0FBMEIsUUFBZkEsRUFBUS9CLEtBUTdDLEVDOU9FOEUsRUFFRCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2ZhY3Rvcmllcy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvVUkuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNlY3Rpb25GYWN0b3J5ID0gKGlkLCB0aXRsZSkgPT4ge1xyXG4gICAgY29uc3QgdG9kb3MgPSBbXTtcclxuICBcclxuICAgIGNvbnN0IGFkZFRvZG8gPSAodG9kbykgPT4ge1xyXG4gICAgICB0b2Rvcy5wdXNoKHRvZG8pO1xyXG4gICAgLy8gICBzYXZlVG9Mb2NhbFN0b3JhZ2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgZGVsZXRlVG9kbyA9ICh0b2RvKSA9PiB7XHJcbiAgICAgIGxldCB0b2RvSW5kZXggPSB0b2Rvcy5pbmRleE9mKHRvZG8pXHJcbiAgICAgIHRvZG9zLnNwbGljZSh0b2RvSW5kZXgsMSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZCxcclxuICAgICAgdGl0bGUsXHJcbiAgICAgIHRvZG9zLFxyXG4gICAgICBhZGRUb2RvLFxyXG4gICAgICBkZWxldGVUb2RvLFxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuY29uc3QgVG9kb0ZhY3RvcnkgPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSxjb21wbGl0ZSkgPT4ge1xyXG4gIGNvbXBsaXRlOiBmYWxzZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRpdGxlLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uLCBcclxuICAgICAgICBkdWVEYXRlLCBcclxuICAgICAgICBwcmlvcml0eSxcclxuICAgICAgICBjb21wbGl0ZVxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcblxyXG4gZXhwb3J0IHtTZWN0aW9uRmFjdG9yeSwgVG9kb0ZhY3Rvcnl9IiwiaW1wb3J0IHsgVG9kb0ZhY3RvcnksIFNlY3Rpb25GYWN0b3J5IH0gZnJvbSBcIi4vZmFjdG9yaWVzXCI7XHJcblxyXG4vLyBNYXliZSB0cnkgdG8gd29yayB3aXRoIHRoaXMgZnVuY3Rpb24gYWxsIHRoZSB3YXksIHdpdGggc2VjdGlvbnModG9kYXksd2VlaywgbW9udGgpIFxyXG4vLyBtYXliZSB0cmUgdG8gdXBkYXRlIGZ1bmN0aW9uIHRvIGJlIGFibGUgdG8gYWRkIHRvZG9zIGFuZCBjcmVhdGUgYW5kIGFkZCBwcm9qZWN0cyBhcyB3ZWxsXHJcblxyXG5sZXQgZGVmYXVsdFRvZG8gPSBUb2RvRmFjdG9yeSgnT3BlbiBtZS4uLicsJ2kga25vdyBob3cgeW91IGZlZWwuLi4gYnV0IGtlZXAgZ29pbmcsIGp1c3Qgb25lIHN0ZXAgYXQgYSB0aW1lJywnMTEvMTIvMTInLCd0b3AnLCk7XHJcbiBcclxuLy8gSW5pdGlhbCBzYW1wbGUgZGF0YSBmb3IgbmF2aWdhdGlvbiBpdGVtcyBhbmQgY29ycmVzcG9uZGluZyBjb250ZW50XHJcbmxldCBzZWN0aW9ucyA9IFtcclxuICB7IGlkOiAnYWxsJywgdGl0bGU6ICdBbGwgVG9kb3MnLCB0b2RvczogW2RlZmF1bHRUb2RvXSB9LFxyXG5dO1xyXG5cclxuY29uc3QgZG9tTG9hZGVyID0gKCkgPT57XHJcbiAgICBjb25zdCBuYXZpZ2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdmlnYXRpb24nKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpO1xyXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKTtcclxuICAgIGNvbnN0IG1vZGFsQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1jb250ZW50Jyk7XHJcblxyXG4gICAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIG5hdmlnYXRpb24gaXRlbXNcclxuICAgIGZ1bmN0aW9uIHJlbmRlck5hdmlnYXRpb24oKSB7XHJcbiAgICAgIG5hdmlnYXRpb24uaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgIGNvbnN0IGNyZWF0ZVByb2plY3RCdG4gPSBjcmVhdGVBbmRBcHBlbmRFbGVtZW50KCdidXR0b24nLCAnY3JlYXRlLXByb2plY3QtYnRuJywgbnVsbCwgJ0NyZWF0ZSBwcm9qZWN0JywgbmF2aWdhdGlvbik7XHJcbiAgICAgIGNyZWF0ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xyXG4gICAgICAgIG9wZW5TZWN0aW9uQ3JlYXRlTW9kYWwoKTtcclxuICAgICAgfSlcclxuICAgICAgc2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcclxuICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCduYXYtZWxlbWVudCcpXHJcbiAgICAgICAgaWYgKHNlY3Rpb24uaWQgPT09ICdjb21wbGV0ZWQnKXtcclxuICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgncHJvamVjdC1zZXBhcmF0b3InKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaXRlbS50ZXh0Q29udGVudCA9IHNlY3Rpb24udGl0bGU7XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dDb250ZW50KHNlY3Rpb24pKTtcclxuICAgICAgICBuYXZpZ2F0aW9uLmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICBcclxuICAgIC8vIEZ1bmN0aW9uIHRvIHNob3cgY29udGVudCBmb3IgYSBzZWxlY3RlZCBzZWN0aW9uXHJcbiAgICBmdW5jdGlvbiBzaG93Q29udGVudChzZWN0aW9uKSB7XHJcblxyXG4gICAgICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICBjb25zdCBjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAvLyBUaXRsZVxyXG4gICAgICBjb25zdCBzZWN0aW9uVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgc2VjdGlvblRpdGxlLmNsYXNzTGlzdC5hZGQoJ3NlY3Rpb24tdGl0bGUnKVxyXG4gICAgICBzZWN0aW9uVGl0bGUudGV4dENvbnRlbnQgPSBzZWN0aW9uLnRpdGxlO1xyXG4gICAgICBjb250ZW50RWxlbWVudC5hcHBlbmRDaGlsZChzZWN0aW9uVGl0bGUpO1xyXG4gICAgICAvL0J1dHRvbiBcclxuICAgICAgY29uc3QgYWRkVG9kb0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICBhZGRUb2RvQnV0dG9uLnR5cGU9ICdidXR0b24nO1xyXG4gICAgICBhZGRUb2RvQnV0dG9uLmlubmVySFRNTCA9IFwiQWRkIFRvZG9cIjtcclxuICAgICAgYWRkVG9kb0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdhZGQtdG9kby1idXR0b24nKVxyXG4gICAgICBjb250ZW50RWxlbWVudC5hcHBlbmRDaGlsZChhZGRUb2RvQnV0dG9uKTtcclxuICAgICAgYWRkVG9kb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcclxuICAgICAgICBvcGVuVG9kb0NyZWF0ZU1vZGFsKCk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBjb250ZW50IGluIHRoZSBzZWN0aW9uXHJcbiAgICAgIGlmIChzZWN0aW9uLnRvZG9zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnN0IG5vVG9kb3NNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIG5vVG9kb3NNZXNzYWdlLnRleHRDb250ZW50ID0gJ05vIHRvZG9zIGZvciB0aGlzIHNlY3Rpb24uJztcclxuICAgICAgICBjb250ZW50RWxlbWVudC5hcHBlbmRDaGlsZChub1RvZG9zTWVzc2FnZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBhcnJheSBhbmQgY3JlYXRlIGVsZW1lbnRzIGZvciBlYWNoIHRvZG8gaXRlbVxyXG4gICAgICAgIHNlY3Rpb24udG9kb3MuZm9yRWFjaCgodG9kbywgaW5kZXgpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIHRvZG9Db250YWluZXIuY2xhc3NMaXN0LmFkZCgndG9kbycpXHJcbiAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcclxuICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0b2RvLmNvbXBsZXRlO1xyXG5cclxuICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgICAgdG9kby5jb21wbGV0ZSA9IGNoZWNrYm94LmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIC8vIFlvdSBjYW4gYWRkIGFkZGl0aW9uYWwgbG9naWMgaGVyZSwgc3VjaCBhcyB1cGRhdGluZyB0aGUgVUkgb3Igc2F2aW5nIHRvIHN0b3JhZ2VcclxuICAgICAgICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpe1xyXG4gICAgICAgICAgICB0b2RvRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjcm9zc2VkLW91dCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRvZG9FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Nyb3NzZWQtb3V0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCB0b2RvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0b2RvRWxlbWVudC50ZXh0Q29udGVudCA9IHRvZG8udGl0bGU7IFxyXG4gICAgICAgICAgdG9kb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBvcGVuVG9kb0RldGFpbHNNb2RhbCh0b2RvLCBpbmRleCkpO1xyXG5cclxuICAgICAgICAgIHRvZG9Db250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xyXG4gICAgICAgICAgdG9kb0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2RvRWxlbWVudCk7XHJcbiAgICAgICAgICBjb250ZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0b2RvQ29udGFpbmVyKVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50RWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhbmQgYXBwZW5kIGVsZW1lbnRzXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVBbmRBcHBlbmRFbGVtZW50KHR5cGUsIGlkLCBuYW1lLCBpbm5lckhUTUwsIHBhcmVudEVsLCBsYWJlbFRleHQsIG9wdGlvbnMpIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XHJcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBuYW1lKTtcclxuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XHJcblxyXG4gICAgICBpZiAodHlwZSAhPT0gXCJidXR0b25cIikge1xyXG4gICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgaWQpO1xyXG4gICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBsYWJlbFRleHQ7XHJcbiAgICAgICAgICBwYXJlbnRFbC5hcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gaW5uZXJIVE1MO1xyXG5cclxuICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQudmFsdWUgPSBvcHRpb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gb3B0aW9uLnRleHQ7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbkVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwYXJlbnRFbC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvcGVuU2VjdGlvbkNyZWF0ZU1vZGFsICgpIHtcclxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgIGNvbnN0IG1vZGFsVGl0bGUgPSBjcmVhdGVBbmRBcHBlbmRFbGVtZW50KCdoMicsICdtb2RhbC10aXRsZScsIG51bGwsICdTZWN0aW9uIGZvcm0nLCBtb2RhbENvbnRlbnQpO1xyXG4gICAgICBjb25zdCBzZWN0aW9uRm9ybSA9IGNyZWF0ZUFuZEFwcGVuZEVsZW1lbnQoJ2Zvcm0nLCAndG9kby1mb3JtJywgbnVsbCwgbnVsbCwgbW9kYWxDb250ZW50KTtcclxuICAgICAgY29uc3Qgc2VjdGlvblRpdGxlID0gY3JlYXRlQW5kQXBwZW5kRWxlbWVudCgnaW5wdXQnLCAndGl0bGUnLCAndGl0bGUnLCBudWxsLCBzZWN0aW9uRm9ybSwgJ1RpdGxlJyk7XHJcblxyXG4gICAgICBjb25zdCB0b2RvU3VibWl0QnRuID0gY3JlYXRlQW5kQXBwZW5kRWxlbWVudChcImJ1dHRvblwiLCBcInNlY3Rpb24tc3VibWl0XCIsIG51bGwsICdTdWJtaXQnLCBzZWN0aW9uRm9ybSwgXCJTdWJtaXRcIik7XHJcbiAgICBcclxuICAgICAgdG9kb1N1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcclxuICAgICAgICBsZXQgbmV3U2VjdGlvbiA9IFNlY3Rpb25GYWN0b3J5KHNlY3Rpb25UaXRsZS52YWx1ZSwgc2VjdGlvblRpdGxlLnZhbHVlKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhuZXdTZWN0aW9uKTtcclxuICAgICAgICBzZWN0aW9ucy5wdXNoKG5ld1NlY3Rpb24pO1xyXG4gICAgICAgIGNsb3NlTW9kYWwoKTtcclxuICAgICAgICByZW5kZXJOYXZpZ2F0aW9uKClcclxuICAgICAgICBzaG93Q29udGVudChzZWN0aW9ucy5maW5kKHNlY3Rpb24gPT4gc2VjdGlvbi5pZCA9PT0gc2VjdGlvblRpdGxlLnZhbHVlKSlcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNyZWF0ZUNsb3NlTW9kYWxCdG4oKTtcclxuICAgIH1cclxuICAgIC8vIGZ1bmN0aW9uIHBvcHVsYXRlU2VjdGlvbihzZWN0aW9uSWQsIHByb2plY3QsIHRvZG8pXHJcbiAgICBmdW5jdGlvbiBvcGVuVG9kb0NyZWF0ZU1vZGFsKCl7XHJcbiAgICAgIGNvbnN0IG1vZGFsVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xyXG4gICAgICBtb2RhbFRpdGxlLmlubmVySFRNTCA9ICdDcmVhdGUgVG9kbyc7XHJcbiAgICAgIG1vZGFsQ29udGVudC5hcHBlbmRDaGlsZChtb2RhbFRpdGxlKTtcclxuICAgICAgLy8gSGVyZSBzaG91bGQgYmUgZm9ybSBlbGVtZW50IHdpdGggc3VibWl0QWxsIGJ1dHRvblxyXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgLy8gY29uc3QgdG9kb0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby1mb3JtJyk7XHJcbiAgICAgIGNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XHJcbiAgICAgIHRvZG9Gb3JtLmlkID0gXCJ0b2RvLWZvcm1cIjtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBhbmQgYXBwZW5kIGVsZW1lbnRzIGZvciBUaXRsZSwgRGVzY3JpcHRpb24sIER1ZSBEYXRlLCBQcmlvcml0eSwgYW5kIFN1Ym1pdCBidXR0b25cclxuICAgICAgY29uc3QgdG9kb1RpdGxlID0gY3JlYXRlQW5kQXBwZW5kRWxlbWVudChcImlucHV0XCIsIFwidGl0bGVcIiwgXCJ0aXRsZVwiLCBudWxsLCB0b2RvRm9ybSwgXCJUaXRsZVwiKTtcclxuICAgICAgY29uc3QgdG9kb0Rlc2NyaXB0aW9uID0gY3JlYXRlQW5kQXBwZW5kRWxlbWVudChcInRleHRhcmVhXCIsIFwiZGVzY3JpcHRpb25cIiwgXCJkZXNjcmlwdGlvblwiLCBudWxsLCB0b2RvRm9ybSwgXCJEZXNjcmlwdGlvblwiKTtcclxuICAgICAgY29uc3QgdG9kb0R1ZURhdGUgPSBjcmVhdGVBbmRBcHBlbmRFbGVtZW50KFwiaW5wdXRcIiwgXCJkdWVEYXRlXCIsIFwiZHVlRGF0ZVwiLCBudWxsLCB0b2RvRm9ybSwgXCJEdWUgRGF0ZVwiKTtcclxuICAgICAgY29uc3QgdG9kb1ByaW9yaXR5ID0gY3JlYXRlQW5kQXBwZW5kRWxlbWVudChcInNlbGVjdFwiLCBcInByaW9yaXR5XCIsIFwicHJpb3JpdHlcIiwgbnVsbCwgdG9kb0Zvcm0sIFwiUHJpb3JpdHlcIiwgW1xyXG4gICAgICAgICAgeyB2YWx1ZTogXCJsb3dcIiwgdGV4dDogXCJMb3dcIiB9LFxyXG4gICAgICAgICAgeyB2YWx1ZTogXCJtZWRpdW1cIiwgdGV4dDogXCJNZWRpdW1cIiB9LFxyXG4gICAgICAgICAgeyB2YWx1ZTogXCJ0b3BcIiwgdGV4dDogXCJUb3BcIiB9LFxyXG4gICAgICBdKTtcclxuICAgICAgY29uc3QgdG9kb1N1Ym1pdEJ0biA9IGNyZWF0ZUFuZEFwcGVuZEVsZW1lbnQoXCJidXR0b25cIiwgXCJ0b2RvLXN1Ym1pdFwiLCBudWxsLCAnU3VibWl0JywgdG9kb0Zvcm0sIFwiU3VibWl0XCIpO1xyXG4gICAgICB0b2RvU3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgIGxldCBuZXdUb2RvID0gVG9kb0ZhY3RvcnkodG9kb1RpdGxlLnZhbHVlLCB0b2RvRGVzY3JpcHRpb24udmFsdWUsIHRvZG9EdWVEYXRlLnZhbHVlLHRvZG9Qcmlvcml0eS52YWx1ZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2cobmV3VG9kbyk7XHJcbiAgICAgICAgLy8gaSB3YW50IGhlcmUgdG8gYmUgYWJsZSB0byBjcmVhdGUgdG9kbyBpbiBzZWN0aW9uIHRoYXQgaSB3YW50XHJcbiAgICAgICAgcG9wdWxhdGVTZWN0aW9uKCdhbGwnLG5ld1RvZG8pXHJcbiAgICAgICAgY2xvc2VNb2RhbCgpO1xyXG4gICAgICAgIHNob3dDb250ZW50KHNlY3Rpb25zLmZpbmQoc2VjdGlvbiA9PiBzZWN0aW9uLmlkID09PSAnYWxsJykpO1xyXG4gICAgICB9KVxyXG4gICAgICBtb2RhbENvbnRlbnQuYXBwZW5kQ2hpbGQodG9kb0Zvcm0pO1xyXG4gIFxyXG4gICAgICBjcmVhdGVDbG9zZU1vZGFsQnRuKCk7XHJcbiAgICAgIGNyZWF0ZVVwZGF0ZU1vZGFsQnRuKCk7XHJcbiAgICB9XHJcbiAgICAvLyBGdW5jdGlvbiB0byBvcGVuIG1vZGFsIHdpdGggdG9kbyBkZXRhaWxzXHJcbiAgICBmdW5jdGlvbiBvcGVuVG9kb0RldGFpbHNNb2RhbCh0b2RvLCBpbmRleCkge1xyXG4gICAgICBtb2RhbENvbnRlbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8cD5Ub2RvIERldGFpbHM6PC9wPlxyXG4gICAgICA8cD5UaXRsZTogJHt0b2RvLnRpdGxlfTwvcD5cclxuICAgICAgPHA+RGVzY3JwdGlvbjogJHt0b2RvLmRlc2NyaXB0aW9uIHx8ICdObyBkZXRhaWxzIGF2YWlsYWJsZSd9PC9wPlxyXG4gICAgICA8cD5EdWUgZGF0ZTogJHt0b2RvLmR1ZURhdGV9PHA+XHJcbiAgICAgIDxwPlByaW9ydHk6ICR7dG9kby5wcmlvcml0eX1cclxuICAgICAgYDtcclxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgXHJcbiAgICAgIGNyZWF0ZUNsb3NlTW9kYWxCdG4oKTtcclxuICAgICAgY3JlYXRlVXBkYXRlTW9kYWxCdG4oKTtcclxuICAgIH1cclxuICBcclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb3NlTW9kYWxCdG4oKXtcclxuICAgICAgLy8gQ2xvc2UgbW9kYWwgd2hlbiB0aGUgY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gJ2Nsb3NlJztcclxuICAgICAgY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gJyZ0aW1lczsnO1xyXG5cclxuICAgICAgLy8gQXR0YWNoIHRoZSBldmVudCBsaXN0ZW5lciB0byBjbG9zZSB0aGUgbW9kYWxcclxuICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZU1vZGFsKCkpO1xyXG5cclxuICAgICAgLy8gQXBwZW5kIHRoZSBjbG9zZSBidXR0b24gdG8gdGhlIG1vZGFsIGNvbnRlbnRcclxuICAgICAgbW9kYWxDb250ZW50LmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gRnVuY3Rpb24gdG8gY2xvc2UgdGhlIG1vZGFsXHJcbiAgICBmdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xyXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICBcclxuICAgICAgbW9kYWxDb250ZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICBcclxuICAgIH1cclxuICBcclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVVwZGF0ZU1vZGFsQnRuICgpe1xyXG4gICAgICAvLyBPcHRpb25hbDogQWRkIGZ1bmN0aW9uYWxpdHkgdG8gdXBkYXRlIG9yIGRlbGV0ZSB0b2RvIGluIHRoZSBtb2RhbFxyXG4gICAgICBjb25zdCB1cGRhdGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgdXBkYXRlQnRuLnRleHRDb250ZW50ID0gJ1VwZGF0ZSc7XHJcbiAgICAgIHVwZGF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHVwZGF0ZVRvZG9EZXRhaWxzKGluZGV4KSk7XHJcbiAgICAgIG1vZGFsQ29udGVudC5hcHBlbmRDaGlsZCh1cGRhdGVCdG4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0b2RvIGRldGFpbHMgKG9wdGlvbmFsKVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlVG9kb0RldGFpbHMoaW5kZXgpIHtcclxuICAgICAgLy8gQWRkIHlvdXIgbG9naWMgdG8gdXBkYXRlIHRvZG8gZGV0YWlsc1xyXG4gICAgICAvLyBZb3UgY2FuIHVzZSBwcm9tcHQsIGlucHV0IGZpZWxkcywgb3IgYW5vdGhlciBtb2RhbCBmb3IgdXBkYXRpbmdcclxuICAgICAgLy8gVGhlbiB1cGRhdGUgdGhlIHNlY3Rpb25zIGFycmF5IGFuZCBjbG9zZSB0aGUgbW9kYWxcclxuICAgICAgY2xvc2VNb2RhbCgpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgXHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHBvcHVsYXRlU2VjdGlvbihzZWN0aW9uSWQsIHRvZG8pIHtcclxuICAgICAgc2VjdGlvbnMuZmluZChzZWN0aW9uID0+IHNlY3Rpb24uaWQgPT09IHNlY3Rpb25JZCkudG9kb3MucHVzaCh0b2RvKTtcclxuICAgIFxyXG4gICAgICAvLyBSZWZyZXNoIHRoZSBuYXZpZ2F0aW9uIGFuZCBjb250ZW50IHRvIHNlZSB0aGUgY2hhbmdlc1xyXG4gICAgICByZW5kZXJOYXZpZ2F0aW9uKCk7XHJcbiAgICAgIHNob3dDb250ZW50KHNlY3Rpb25zLmZpbmQoc2VjdGlvbiA9PiBzZWN0aW9uLmlkID09PSBzZWN0aW9uSWQpKTtcclxuICAgIH1cclxuICBcclxuXHJcbiAgcmVuZGVyTmF2aWdhdGlvbigpO1xyXG4gIHNob3dDb250ZW50KHNlY3Rpb25zLmZpbmQoc2VjdGlvbiA9PiBzZWN0aW9uLmlkID09PSAnYWxsJykpO1xyXG5cclxuICByZXR1cm57XHJcbiAgICByZW5kZXJOYXZpZ2F0aW9uLFxyXG4gICAgc2hvd0NvbnRlbnQsXHJcbiAgICBvcGVuVG9kb0RldGFpbHNNb2RhbCxcclxuICAgIGNsb3NlTW9kYWwsXHJcbiAgICBwb3B1bGF0ZVNlY3Rpb25cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgZG9tTG9hZGVyLFxyXG4gIHNlY3Rpb25zLFxyXG59IiwiaW1wb3J0IHsgVG9kb0ZhY3RvcnksIFByb2plY3RGYWN0b3J5IH0gZnJvbSBcIi4vZmFjdG9yaWVzXCI7XHJcbmltcG9ydCB7IGRvbUxvYWRlcixzZWN0aW9ucyxyZW5kZXJOYXZpZ2F0aW9uIH0gZnJvbSBcIi4vVUlcIjtcclxuXHJcbi8vIGkgbmVlZCB0byB3aHJpdGUgbG9jYWwgc3RvcmFnZSBmdW5jdGlvbnMsIHBlZ2hhcHMgaW4gZGlmZmVyZW50IG1vZHVsZVxyXG4vLyBhZGQgZGF0ZS1mbnNcclxuLy8gY3JlYXRlIG9yIGZpbmQgdGhlIFVJOiBcclxuLy8gZXhwYW5kIHRoZSBmYWN0b3JpZXMgd2l0aCB0aGUgbG9jYWwgc3RvcmFnZSBmdW5jdGlvbnMoZGVsZXRlLGFkZCxnZXQpXHJcbi8vIGNyZWF0ZSBvbmxvYWQgZnVuY3Rpb24gd2l0aCBhbGwgZ2V0IGZyb20gbG9jYWwgc3RvcmFnZVxyXG4vLyBsZWFybiBob3cgdG8gZXhwYW5kIHRvZG8gdG8gc2VlL2VkaXQgaXRzIGRldGFpbHNcclxuLy8gdmlldyBhbGwgdG9kb3MgaW4gZWFjaCBwcm9qZWN0IChwcm9iYWJseSBqdXN0IHRoZSB0aXRsZSBhbmQgZHVlZGF0ZeKApiBwZXJoYXBzIGNoYW5naW5nIGNvbG9yIGZvciBkaWZmZXJlbnQgcHJpb3JpdGllcylcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBkb21Mb2FkZXIoKTtcclxuICAgIC8vIHJlbmRlck5hdmlnYXRpb24oKVxyXG4gICB9KTtcclxuICBcclxuICAgIl0sIm5hbWVzIjpbIlRvZG9GYWN0b3J5IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsaXRlIiwic2VjdGlvbnMiLCJpZCIsInRvZG9zIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwibmF2aWdhdGlvbiIsImdldEVsZW1lbnRCeUlkIiwiY29udGVudCIsIm1vZGFsIiwibW9kYWxDb250ZW50IiwicmVuZGVyTmF2aWdhdGlvbiIsImlubmVySFRNTCIsImNyZWF0ZUFuZEFwcGVuZEVsZW1lbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJzZWN0aW9uRm9ybSIsInNlY3Rpb25UaXRsZSIsIm5ld1NlY3Rpb24iLCJhZGRUb2RvIiwidG9kbyIsInB1c2giLCJkZWxldGVUb2RvIiwidG9kb0luZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsIlNlY3Rpb25GYWN0b3J5IiwidmFsdWUiLCJjb25zb2xlIiwibG9nIiwiY2xvc2VNb2RhbCIsInNob3dDb250ZW50IiwiZmluZCIsInNlY3Rpb24iLCJjcmVhdGVDbG9zZU1vZGFsQnRuIiwib3BlblNlY3Rpb25DcmVhdGVNb2RhbCIsImZvckVhY2giLCJpdGVtIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50RWxlbWVudCIsImFkZFRvZG9CdXR0b24iLCJ0eXBlIiwibW9kYWxUaXRsZSIsInRvZG9Gb3JtIiwidG9kb1RpdGxlIiwidG9kb0Rlc2NyaXB0aW9uIiwidG9kb0R1ZURhdGUiLCJ0b2RvUHJpb3JpdHkiLCJ0ZXh0IiwibmV3VG9kbyIsInBvcHVsYXRlU2VjdGlvbiIsImNyZWF0ZVVwZGF0ZU1vZGFsQnRuIiwib3BlblRvZG9DcmVhdGVNb2RhbCIsImxlbmd0aCIsIm5vVG9kb3NNZXNzYWdlIiwiaW5kZXgiLCJ0b2RvQ29udGFpbmVyIiwiY2hlY2tib3giLCJjaGVja2VkIiwiY29tcGxldGUiLCJ0b2RvRWxlbWVudCIsInJlbW92ZSIsIm9wZW5Ub2RvRGV0YWlsc01vZGFsIiwibmFtZSIsInBhcmVudEVsIiwibGFiZWxUZXh0Iiwib3B0aW9ucyIsImVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJsYWJlbCIsIm9wdGlvbiIsIm9wdGlvbkVsZW1lbnQiLCJjbG9zZUJ1dHRvbiIsImNsYXNzTmFtZSIsInVwZGF0ZUJ0biIsInNlY3Rpb25JZCIsImRvbUxvYWRlciJdLCJzb3VyY2VSb290IjoiIn0=